# Code Structure Summary

This document provides a high-level overview of the project's file structure and the purpose of key components. **Agents MUST read this file before modifying source code to understand where logic resides.**

## Project Root
- `webpack.config.js`: Configuration for bundling the extension. Defines entry points (`content_script`, `options`) and uses `copy-webpack-plugin` to move static assets.
- `package.json`: Dependencies (`luxon`, `webpack`) and scripts (`npm run build`).
- `DESIGN.md`: The living design document and implementation plan.
- `AGENTS.md`: Operational instructions for AI agents working on this repo.
- `test_harness.html`: A generated HTML file for locally testing the detection logic without loading the full extension.

## Source Code (`src/`)
The source of truth for the extension.

### 1. Manifest
- `src/manifest.json`: The extension's configuration (Manifest V3). Defines permissions (`storage`), content scripts matches, and the options page.

### 2. Content Script (Core Logic)
- `src/content_script.js`: The "brain" of the extension.
    - **Purpose**: Runs on web pages, detects time strings, and shows the tooltip.
    - **Key Functions**:
        - `handleMouseMove`: Debounced event listener for hover detection.
        - `getCaretFromPoint`: Utilities to find the text node under the cursor.
        - `extractTimeContext`: Iterates through `TIME_PATTERNS` regex array to find date strings.
        - `convertTime`: Uses `luxon` and native `Date` to convert the string to target timezones.
        - `showTooltip` / `removeTooltip`: DOM manipulation to render the floating UI.
    - **Configuration**: Loads user preferences (`targetTimezones`) from `chrome.storage.sync`.

### 3. Options Page (Settings)
- `src/options.html`: The UI for the extension settings page.
- `src/options.js`: Logic for the settings page.
    - **Purpose**: Allows users to add/remove target timezones.
    - **Storage**: Persists the list of IANA timezone strings to `chrome.storage.sync`.

## Build Artifacts (`dist/`)
- Generated by `npm run build`. 
- Contains the bundled JS files and copied assets ready for loading into Chrome ("Load Unpacked").
- **Do not edit files here.**

## Assets (`icons/`)
- Placeholder icons required by the manifest.
